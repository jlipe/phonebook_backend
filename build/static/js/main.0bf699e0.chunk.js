(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(0),a=t(1),r=t(15),u=t.n(r),o=t(6),i=t(3),s=function(e){return Object(c.jsxs)("div",{children:["filter shown with ",Object(c.jsx)("input",{onChange:e.handleFilterChange,value:e.filter})]})},l=function(e){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{onChange:e.handleNameChange})]}),Object(c.jsxs)("div",{children:["number: ",Object(c.jsx)("input",{onChange:e.handleNumberChange})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",onClick:e.addPerson,children:"add"})})]})},d=function(e){return(e.filter?e.persons.filter((function(n){return n.name.toLowerCase().includes(e.filter.toLowerCase())})):e.persons).map((function(n){return Object(c.jsxs)("div",{children:[n.name," ",n.number,Object(c.jsx)("button",{value:n.id,name:n.name,onClick:e.buttonDelete,children:"Delete"})]},n.id)}))},j=function(e){var n=e.message,t=e.className;return null===n?null:Object(c.jsx)("div",{className:t,children:n})},f=t(4),b=t.n(f),h="/api/persons",m=function(){return b.a.get(h).then((function(e){return e.data}))},O=function(e){return b.a.post(h,e).then((function(e){return e.data}))},p=function(e,n){return b.a.put("".concat(h,"/").concat(e),n).then((function(e){return e.data}))},v=function(e,n){return b.a.delete("".concat(h,"/").concat(e)).then((function(e){return e.data}))},x=function(){var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],r=n[1],u=Object(a.useState)(""),f=Object(i.a)(u,2),b=f[0],h=f[1],x=Object(a.useState)(""),g=Object(i.a)(x,2),w=g[0],C=g[1],N=Object(a.useState)(""),k=Object(i.a)(N,2),D=k[0],P=k[1],S=Object(a.useState)(null),T=Object(i.a)(S,2),y=T[0],F=T[1],E=Object(a.useState)(null),J=Object(i.a)(E,2),L=J[0],A=J[1];Object(a.useEffect)((function(){m().then((function(e){r(e)}))}),[]);return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),y?Object(c.jsx)(j,{message:y,className:"error"}):null,L?Object(c.jsx)(j,{message:L,className:"success"}):null,Object(c.jsx)(s,{handleFilterChange:function(e){P(e.target.value)},filter:D}),Object(c.jsx)("h2",{children:"Add a New"}),Object(c.jsx)(l,{handleNameChange:function(e){h(e.target.value)},handleNumberChange:function(e){C(e.target.value)},addPerson:function(e){if(e.preventDefault(),t.map((function(e){return e.name})).includes(b)){if(!window.confirm("".concat(b," is already in the phone book, replace old number?")))return;!function(e){var n=t.find((function(n){return n.id===e})),c=Object(o.a)(Object(o.a)({},n),{},{number:w});p(c.id,c).then((function(e){r(t.map((function(n){return n.id!==e.id?n:c}))),A("Person '".concat(c.name,"' was updated")),setTimeout((function(){A(null)}),5e3)})).catch((function(e){F("".concat(e.response.data.error)),setTimeout((function(){F(null)}),5e3)}))}(t.find((function(e){return e.name===b})).id)}else{var n={name:b,number:w};O(n).then((function(e){r(t.concat(e)),A("Person '".concat(n.name,"' was added")),setTimeout((function(){A(null)}),5e3)})).catch((function(e){F("".concat(e.response.data.error)),setTimeout((function(){F(null)}),5e3)}))}}}),Object(c.jsx)("h2",{children:"Numbers"}),t?Object(c.jsx)(d,{persons:t,filter:D,buttonDelete:function(e){e.preventDefault();var n=e.target.value,c=e.target.name;window.confirm("Delete user ".concat(c,"?"))&&(v(n,c),r(t.filter((function(e){return e.id!==n}))),A("Person '".concat(c,"' was removed")),setTimeout((function(){A(null)}),5e3))}}):null]})};t(39);u.a.render(Object(c.jsx)(x,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.0bf699e0.chunk.js.map