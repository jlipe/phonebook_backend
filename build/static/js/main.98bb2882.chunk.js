(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(0),a=t(1),r=t(15),u=t.n(r),i=t(6),o=t(3),s=function(e){return Object(c.jsxs)("div",{children:["filter shown with ",Object(c.jsx)("input",{onChange:e.handleFilterChange,value:e.filter})]})},l=function(e){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{onChange:e.handleNameChange})]}),Object(c.jsxs)("div",{children:["number: ",Object(c.jsx)("input",{onChange:e.handleNumberChange})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",onClick:e.addPerson,children:"add"})})]})},d=function(e){return(e.filter?e.persons.filter((function(n){return n.name.toLowerCase().includes(e.filter.toLowerCase())})):e.persons).map((function(n){return Object(c.jsxs)("div",{children:[n.name," ",n.number,Object(c.jsx)("button",{value:n.id,name:n.name,onClick:e.buttonDelete,children:"Delete"})]},n.id)}))},j=function(e){var n=e.message,t=e.className;return null===n?null:Object(c.jsx)("div",{className:t,children:n})},b=t(4),f=t.n(b),h="/api/persons",m=function(){return f.a.get(h).then((function(e){return e.data}))},O=function(e){return f.a.post(h,e).then((function(e){return e.data}))},p=function(e,n){return f.a.put("".concat(h,"/").concat(e),n).then((function(e){return e.data}))},v=function(e,n){return f.a.delete("".concat(h,"/").concat(e)).then((function(e){return e.data}))},g=function(){var e=Object(a.useState)([]),n=Object(o.a)(e,2),t=n[0],r=n[1],u=Object(a.useState)(""),b=Object(o.a)(u,2),f=b[0],h=b[1],g=Object(a.useState)(""),x=Object(o.a)(g,2),w=x[0],C=x[1],N=Object(a.useState)(""),k=Object(o.a)(N,2),P=k[0],D=k[1],S=Object(a.useState)(null),y=Object(o.a)(S,2),T=y[0],F=y[1],E=Object(a.useState)(null),J=Object(o.a)(E,2),L=J[0],A=J[1];Object(a.useEffect)((function(){m().then((function(e){r(e)}))}),[]);return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),T?Object(c.jsx)(j,{message:T,className:"error"}):null,L?Object(c.jsx)(j,{message:L,className:"success"}):null,Object(c.jsx)(s,{handleFilterChange:function(e){D(e.target.value)},filter:P}),Object(c.jsx)("h2",{children:"Add a New"}),Object(c.jsx)(l,{handleNameChange:function(e){h(e.target.value)},handleNumberChange:function(e){C(e.target.value)},addPerson:function(e){if(e.preventDefault(),t.map((function(e){return e.name})).includes(f))return window.confirm("".concat(f," is already in the phone book, replace old number?"))?void function(e){var n=t.find((function(n){return n.id===e})),c=Object(i.a)(Object(i.a)({},n),{},{number:w});p(c.id,c).then((function(e){r(t.map((function(n){return n.id!==e.id?n:c}))),A("Person '".concat(c.name,"' was updated")),setTimeout((function(){A(null)}),5e3)})).catch((function(e){F("Person '".concat(c.name,"' was already deleted")),setTimeout((function(){F(null)}),5e3)}))}(t.find((function(e){return e.name===f})).id):void 0;var n={name:f,number:w};O(n).then((function(e){r(t.concat(e))})),A("Person '".concat(n.name,"' was added")),setTimeout((function(){A(null)}),5e3)}}),Object(c.jsx)("h2",{children:"Numbers"}),t?Object(c.jsx)(d,{persons:t,filter:P,buttonDelete:function(e){e.preventDefault();var n=e.target.value,c=e.target.name;window.confirm("Delete user ".concat(c,"?"))&&(v(e.target.value,e.target.name),r(t.filter((function(e){return e.id!==+n}))),A("Person '".concat(c,"' was removed")),setTimeout((function(){A(null)}),5e3))}}):null]})};t(39);u.a.render(Object(c.jsx)(g,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.98bb2882.chunk.js.map